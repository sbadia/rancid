.\"
.Dd January 16, 2001
.Dt env 5
.Sh NAME
.Nm env
.Nd rancid environment configuration file
.Sh DESCRIPTION
.Nm
contains environment configuration information for
.Ic do-diffs(1)
and
.Ic rancid(1)
such as shell PATH, list of rancid groups, etc. and is read by
.Ic do-diffs(1)
at run-time.
.Pp
The syntax of
.Nm
is that of
.Ic sh(1) .
.Nm
is used to set environment variables used by other rancid scripts to
effect their run-time behavior or to enable them to find their resources.
.Pp
.Sh VARIABLES
The following variables are used (alphabetically):
.Pp
.Bl -tag -width flag
.\"
.It BASEDIR
BASEDIR is the top-level directory where rancid is installed.  It's value
is set by configure and should be modified if rancid is moved to a new
location in the file system without re-installing from the distribution.
.Pp
Default: @prefix@
.\"
.It CVSROOT
.Ic cvs(1)
and
.Ic create_cvs(1)
use this environment variable to locate the CVS repository.  It should
not be necessary to alter CVSROOT.
.Pp
Default: $BASEDIR/CVS
.\"
.It LIST_OF_GROUPS
Defines a list of group names of routers separated by white-space.  These
names become the directory names in $BASEDIR which contain the data
for that set of devices.
.Ic do-diffs(1)
also uses this variable to determine which device groups it should collect.
Choose these names to be descriptive of the set of devices and do not use
spaces, unprintable characters, etc.
.Pp
Example: LIST_OF_GROUPS="UofO USFS"
.Pp
Two groups are defined; UofO (University of Oregon) and USFS (US Forest
Service).  Each will have a directory created (see
.Ic create_cvs(1)
for more information), $BASEDIR/UofO and $BASEDIR/USFS respectively, which
will contain their data.
.\"
.It NOCOMMSTR
If set,
.Ic rancid(1)
will filter SNMP community strings from configs.  Otherwise, they will
be retained and may appear in clear-text in e-mail diffs.  By default,
this is not set.
.\"
.It NOPIPE
.\"
If set,
.Ic rancid(1)
will use temporary files to save the output from the router and then read
these to build the file which will be saved in CVS.  Otherwise, an IPC
pipe will be used.  We have found that the buffering mechanisms used in
perl and expect are haneous.  Using temporary files results in a noticeable
improvement in speed.  By default, this is not set.
.It OLDTIME
Specified as a number of hours, OLDTIME defines how many hours should pass
since a successful collection of a device's configuration and when
.Ic control_rancid(1)
should start complaining about failures.
.Pp
Default: 4
.\"
.It PATH
Is a colon separate list of directory pathnames in the the file system
where rancid's
.Ic sh(1)
and
.Ic perl(1)
scripts should look for the programs that it needs, such as
.Ic "telnet(1)" .
It's value is set by configure.  Should it be necessary to modify PATH, but
note that it must include $BASEDIR/bin (see above).
.\"
.It TERM
Some Unix utilities require TERM, the terminal type, to be set to a sane
value.  The default should suffice.
.Pp
Default: network
.\"
.It TMPDIR
Some Unix utilities recognize TMPDIR as a directory where temporary files
can be stored.  In some cases, rancid utilizes this directory for lock
files and other temporary files.
.Pp
Default: /tmp
.El
.Pp
Each of these are simply environment variables.  In order for them to be
present in the environment of child processes, each must be exported.  See
.Ic sh(1)
for more information on the built-in command export.
.Sh ERRORS
.Nm
is interpreted directly by 
.Ic sh(1),
so its syntax follows that of the bourne shell.  Errors
may produce quite unexpected results.
.Sh FILES
.Bl -tag -width .BASEDIR/bin/ENV -compact
.It $BASEDIR/bin/env
Configuration file described here.
.El
.Sh SEE ALSO
.Xr control_rancid 1 ,
.Xr create_cvs 1 ,
.Xr do-diffs 1 ,
.Xr rancid 1
